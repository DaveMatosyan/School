@model IEnumerable<School_Project.Models.Schedule>

@{
    ViewData["Title"] = "Timetable";
}
<link rel="stylesheet" href="~/css/site.css" />

<div class="col py-3">

<h1>Timetable</h1>

                @if(User.IsInRole("Principal"))
{
                <p>
    <a class="without-underscore-link" asp-action="Create" asp-route-ClassId="@ViewBag.ClassId">Create New</a>
</p>
}

<table class="table">
    <thead>
        <tr>
            <th>
                Hour
            </th>
            <th>
                Monday
            </th>
            <th>
                Tuesday
            </th>
            <th>
                Wednesday
            </th>
            <th>
                Thursday
            </th>
            <th>
                Friday
            </th>
        </tr>
    </thead>
    <tbody>
        @{
            int temp = 0;
        }
        @for(int i = 1; i < 8; i++) {
    <tr>
        <td>
            @i
        </td>
    @for(int j = 1; j <= 5; j++) {
            @foreach(var item in @ViewBag.schedules)
            {
                    @if(item.DayId == j && item.Hour == i)
                    {

                            temp += 1;
                            <td>
                                
                                    @if(User.IsInRole("Teacher"))
                                    {
                                        @item.Class.Class1
                                    } else if (User.IsInRole("Student"))
                                    {
                                        @item.Title
                                    } else {
                                        <a class="without-underscore-link" asp-controller="Schedule" asp-action="Edit" asp-route-DayId="@j" asp-route-Hour="@i">@item.Title</a>
                                    }
                            </td>
                    }

                    }
                    if(temp==1)
                    {
                        temp -= 1;
                    } else
                    {
                            @if(User.IsInRole("Principal"))
                            {
                                <td>
                                    <a class="without-underscore-link" asp-controller="Schedule" asp-action="Create" asp-route-DayId="@j" asp-route-Hour="@i">-</a>
                                </td>
                                
                            } else 
                            {
                                <td>
                                    -
                                </td>
                            }

                    }

    }
    </tr>
}
        @if(!User.IsInRole("Teacher"))
        {
<tr>
    <td>
        WeekDay
    </td>
    @for(int i = 1; i <= 5; i++) {

        <td>
                <a asp-action="Timetable" asp-route-index="@i" asp-route-ClassId="@ViewBag.ClassId">Details</a>
        </td>
}
</tr>

        }


    </tbody>
</table>
</div>